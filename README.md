# 🎮 VoxelAction

### 📌 프로젝트 소개
> 🎮 **PC 3D 슈팅 플랫폼 게임입니다.**

### 📌 개발 환경
- Unity3D 2023
- C#

### 📌 구현 
- 플레이어는 입력 정보에 따라서 더블점프, 점프, 달리기, 구르기, 걷기, 공격이 가능합니다. 
- 에디터에서 확률을 조정한 대로 아이템이 랜덤 생성되고 플레이어와의 충돌이 확인되면 `Status` 정보가 업데이트된 후 UI이벤트가 호출되어 UI 업데이트를 확인할 수 있습니다.
- 오브젝트 풀링을 활용해서 플레이어를 쫓아오는 적이 점점 많이 생성되도록 하고, `SetActive()` 메소드를 사용해서 죽은 적을 재활용하였습니다. 
  - 탄피 오브젝트, 공격 파티클에도 오브젝트 풀링을 적용해서 게임의 성능을 향상시키고자 하였습니다. 
- 적이 장애물을 피해서 플레이어를 쫓아오는 길찾기 기능은, 힙 자료구조를 사용한 `A*` 알고리즘으로 구현했습니다.  
- 또한 적의 행동을 `FSM`으로 관리하여 플레이어와의 거리에 따라 배회, 추적, 공격 상태로 변경되도록 하였습니다. 
  - 단순히 bool 타입 체크를 열거하는 방식에서 `FSM`을 적용해서 객체지향적으로 설계하도록 했습니다.

### 📌 구현 상세
- 플레이어 움직임: 걷기 (WASD), 달리기 (WASD+Shift), 점프(Space), 더블점프(Space), 구르기(WASD+ Ctrl) 
- 카메라: 마우스 입력에 따른 플레이어 시야 회전, 시점 변환 1인칭/3인칭(V), 1인칭일 때 카메라에 Culling Mask 적용
- 공격 입력 키: 1, 2, 3 선택 후 왼쪽마우스로 공격, 오른쪽 마우스를 꾹 눌러서 수류탄 발사
- 재장전: R 키
- 오브젝트 풀링 (메모리 풀링) : 게임 성능 최적화를 위해 사용했습니다. 하나의 메모리풀 인스턴스는 하나의 오브젝트를 관리합니다.
  - 몬스터 임의 생성
  - 탄피 오브젝트 프리팹
  - 총기로 공격 시, 파티클 프리팹
- 몬스터 생성 전 생성될 위치에서 생성을 예고합니다.
- 몬스터는 지정된 맵에서 장애물을 피해서 타켓(플레이어) 을 향해 길을 찾아옵니다. A* 알고리즘을 사용했습니다.
- 몬스터는 플레이어와의 거리에 따라서 배회, 공격을 할 수 있도록 FSM을 적용했습니다.
- 몬스터의 Collider 에 부딪히면 피격 처리가 되어서 플레이어의 체력이 5씩 감소합니다. 화면이 0.5초동안 Red 색상으로 반짝입니다.
- 상호작용 E키
  - 무기 수집 (OnTriggerStay & OnTriggerExit) 
  - 소모품 탄약, 동전, 체력, 수류탄 수집 (OnTriggerEnter)
- 미니맵을 카메라의 회전 정보에 따라 회전시킵니다.
- 에디터에서 지정한 확률에 근접하도록 랜덤으로 소모품 프리팹을 Instatitate() 메소드로 생성합니다.
- 수류탄을 사용할 때 마우스 우클릭을 최대 3초동안 꾹 누를 수 있고, 오래 누를수록 더 멀리 던져집니다. 
- 총 공격 구현 : ScreenPointToRay를 활용해서 2단계의 RayCast를 진행합니다.
  - 총을 쏘면 자동으로 플레이어가 앞을 바라보도록 회전시키도록 ShotTurn() 메소드를 작성했습니다. 
  - 2,3 키 눌렀을 때, 총을 이미 수집한 경우에만 있을 때에만 조준 UI (AimPanel) 를 표시합니다.


### 📌 영상
https://youtu.be/dgtIPAv8868

### 📌 실행 캡쳐
![image](https://github.com/strurao/VoxelAction/assets/126440235/0d58d2a8-a10b-4137-86b0-7d6eac69a3c9)

![image](https://github.com/strurao/VoxelAction/assets/126440235/094dd624-dbfa-477b-97db-1f4b7a4cc1ba)
